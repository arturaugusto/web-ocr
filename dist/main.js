!function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=12)}([function(t,e,r){var n;!function(a){"use strict";function i(t,e,r){var n,a=document.createElement("img");function o(e,o){o&&console.log(o),e&&i.isInstanceOf("Blob",e)?(t=e,n=i.createObjectURL(t)):(n=t,r&&r.crossOrigin&&(a.crossOrigin=r.crossOrigin)),a.src=n}return a.onerror=function(o){return i.onerror(a,o,t,n,e,r)},a.onload=function(o){return i.onload(a,o,t,n,e,r)},"string"==typeof t?(i.hasMetaOption(r)?i.fetchBlob(t,o,r):o(),a):i.isInstanceOf("Blob",t)||i.isInstanceOf("File",t)?(n=i.createObjectURL(t))?(a.src=n,a):i.readFile(t,(function(t){var r=t.target;r&&r.result?a.src=r.result:e&&e(t)})):void 0}var o=a.createObjectURL&&a||a.URL&&URL.revokeObjectURL&&URL||a.webkitURL&&webkitURL;function s(t,e){!t||"blob:"!==t.slice(0,5)||e&&e.noRevoke||i.revokeObjectURL(t)}i.hasMetaOption=function(t){return t&&t.meta},i.fetchBlob=function(t,e){e()},i.isInstanceOf=function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"},i.transform=function(t,e,r,n,a){r(t,a)},i.onerror=function(t,e,r,n,a,i){s(n,i),a&&a.call(t,e)},i.onload=function(t,e,r,n,a,o){s(n,o),a&&i.transform(t,o,a,r,{originalWidth:t.naturalWidth||t.width,originalHeight:t.naturalHeight||t.height})},i.createObjectURL=function(t){return!!o&&o.createObjectURL(t)},i.revokeObjectURL=function(t){return!!o&&o.revokeObjectURL(t)},i.readFile=function(t,e,r){if(a.FileReader){var n=new FileReader;if(n.onload=n.onerror=e,n[r=r||"readAsDataURL"])return n[r](t),n}return!1},void 0===(n=function(){return i}.call(e,r,e,t))||(t.exports=n)}("undefined"!=typeof window&&window||this)},function(t,e,r){var n,a,i;!function(o){"use strict";a=[r(0)],void 0===(i="function"==typeof(n=function(t){var e="undefined"!=typeof Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);t.blobSlice=e&&function(){var t=this.slice||this.webkitSlice||this.mozSlice;return t.apply(this,arguments)},t.metaDataParsers={jpeg:{65505:[],65517:[]}},t.parseMetaData=function(e,r,n,a){a=a||{};var i=this,o=(n=n||{}).maxMetaDataSize||262144;!!("undefined"!=typeof DataView&&e&&e.size>=12&&"image/jpeg"===e.type&&t.blobSlice)&&t.readFile(t.blobSlice.call(e,0,o),(function(e){if(e.target.error)return console.log(e.target.error),void r(a);var o,s,l,c,u=e.target.result,d=new DataView(u),h=2,f=d.byteLength-4,g=h;if(65496===d.getUint16(0)){for(;h<f&&((o=d.getUint16(h))>=65504&&o<=65519||65534===o);){if(h+(s=d.getUint16(h+2)+2)>d.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if((l=t.metaDataParsers.jpeg[o])&&!n.disableMetaDataParsers)for(c=0;c<l.length;c+=1)l[c].call(i,d,h,s,a,n);g=h+=s}!n.disableImageHead&&g>6&&(u.slice?a.imageHead=u.slice(0,g):a.imageHead=new Uint8Array(u).subarray(0,g))}else console.log("Invalid JPEG file: Missing JPEG marker.");r(a)}),"readAsArrayBuffer")||r(a)},t.replaceHead=function(e,r,n){t.parseMetaData(e,(function(a){n(new Blob([r,t.blobSlice.call(e,a.imageHead.byteLength)],{type:"image/jpeg"}))}),{maxMetaDataSize:256,disableMetaDataParsers:!0})};var r=t.transform;t.transform=function(e,n,a,i,o){t.hasMetaOption(n)?t.parseMetaData(i,(function(o){r.call(t,e,n,a,i,o)}),n,o):r.apply(t,arguments)}})?n.apply(e,a):n)||(t.exports=i)}()},function(t,e){t.exports=(t,e)=>`${t}-${e}-${Math.random().toString(16).slice(3,8)}`},function(t,e){let r=!1;e.logging=r,e.setLogging=t=>{r=t},e.log=(...t)=>r?console.log.apply(this,t):null},function(t,e){var r,n,a=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var l,c=[],u=!1,d=-1;function h(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&f())}function f(){if(!u){var t=s(h);u=!0;for(var e=c.length;e;){for(l=c,c=[];++d<e;)l&&l[d].run();d=-1,e=c.length}l=null,u=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function p(){}a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new g(t,e)),1!==c.length||u||s(f)},g.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=p,a.addListener=p,a.once=p,a.off=p,a.removeListener=p,a.removeAllListeners=p,a.emit=p,a.prependListener=p,a.prependOnceListener=p,a.listeners=function(t){return[]},a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,e,r){var n,a;void 0===(a="function"==typeof(n=function(){return function(){var t=arguments.length;if(0===t)throw new Error("resolveUrl requires at least one argument; got none.");var e=document.createElement("base");if(e.href=arguments[0],1===t)return e.href;var r=document.getElementsByTagName("head")[0];r.insertBefore(e,r.firstChild);for(var n,a=document.createElement("a"),i=1;i<t;i++)a.href=arguments[i],n=a.href,e.href=n;return r.removeChild(e),n}})?n.call(e,r,e,t):n)||(t.exports=a)},function(t,e,r){const n=r(2);let a=0;t.exports=({id:t,action:e,payload:r={}})=>{let i=t;return void 0===i&&(i=n("Job",a),a+=1),{id:i,action:e,payload:r}}},function(t,e,r){const n=r(17),a=r(20),i=r(6),{log:o}=r(3),s=r(2),{defaultOEM:l}=r(21),{defaultOptions:c,spawnWorker:u,terminateWorker:d,onMessage:h,loadImage:f,send:g}=r(22);let p=0;t.exports=(t={})=>{const e=s("Worker",p),{logger:r,errorHandler:m,...v}=n({...c,...t}),y={},b={};let w=u(v);p+=1;const A=(t,e)=>{y[t]=e},x=(t,e)=>{b[t]=e},S=({id:t,action:r,payload:n})=>new Promise((a,i)=>{o(`[${e}]: Start ${t}, action=${r}`),A(r,a),x(r,i),g(w,{workerId:e,jobId:t,action:r,payload:n})});return h(w,({workerId:t,jobId:e,status:n,action:i,data:s})=>{if("resolve"===n){o(`[${t}]: Complete ${e}`);let r=s;"recognize"===i?r=a(s):"getPDF"===i&&(r=Array.from({...s,length:Object.keys(s).length})),y[i]({jobId:e,data:r})}else if("reject"===n){if(b[i](s),!m)throw Error(s);m(s)}else"progress"===n&&r(s)}),{id:e,worker:w,setResolve:A,setReject:x,load:t=>S(i({id:t,action:"load",payload:{options:v}})),writeText:(t,e,r)=>S(i({id:r,action:"FS",payload:{method:"writeFile",args:[t,e]}})),readText:(t,e)=>S(i({id:e,action:"FS",payload:{method:"readFile",args:[t,{encoding:"utf8"}]}})),removeFile:(t,e)=>S(i({id:e,action:"FS",payload:{method:"unlink",args:[t]}})),FS:(t,e,r)=>S(i({id:r,action:"FS",payload:{method:t,args:e}})),loadLanguage:(t="eng",e)=>S(i({id:e,action:"loadLanguage",payload:{langs:t,options:v}})),initialize:(t="eng",e=l,r)=>S(i({id:r,action:"initialize",payload:{langs:t,oem:e}})),setParameters:(t={},e)=>S(i({id:e,action:"setParameters",payload:{params:t}})),recognize:async(t,e={},r)=>S(i({id:r,action:"recognize",payload:{image:await f(t),options:e}})),getPDF:(t="Tesseract OCR Result",e=!1,r)=>S(i({id:r,action:"getPDF",payload:{title:t,textonly:e}})),detect:async(t,e)=>S(i({id:e,action:"detect",payload:{image:await f(t)}})),terminate:async()=>(null!==w&&(d(w),w=null),Promise.resolve())}}},function(t,e){t.exports={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}},function(t,e,r){var n,a,i;!function(o){"use strict";a=[r(0)],void 0===(i="function"==typeof(n=function(t){var e=t.transform;t.transform=function(r,n,a,i,o){e.call(t,t.scale(r,n,o),n,a,i,o)},t.transformCoordinates=function(){},t.getTransformedOptions=function(t,e){var r,n,a,i,o=e.aspectRatio;if(!o)return e;for(n in r={},e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.crop=!0,(a=t.naturalWidth||t.width)/(i=t.naturalHeight||t.height)>o?(r.maxWidth=i*o,r.maxHeight=i):(r.maxWidth=a,r.maxHeight=a/o),r},t.renderImageToCanvas=function(t,e,r,n,a,i,o,s,l,c,u){var d=t.getContext("2d");return!1===u.imageSmoothingEnabled?d.imageSmoothingEnabled=!1:u.imageSmoothingQuality&&(d.imageSmoothingQuality=u.imageSmoothingQuality),d.drawImage(e,r,n,a,i,o,s,l,c),t},t.hasCanvasOption=function(t){return t.canvas||t.crop||!!t.aspectRatio},t.scale=function(e,r,n){r=r||{};var a,i,o,s,l,c,u,d,h,f,g,p=document.createElement("canvas"),m=e.getContext||t.hasCanvasOption(r)&&p.getContext,v=e.naturalWidth||e.width,y=e.naturalHeight||e.height,b=v,w=y;function A(){var t=Math.max((o||b)/b,(s||w)/w);t>1&&(b*=t,w*=t)}function x(){var t=Math.min((a||b)/b,(i||w)/w);t<1&&(b*=t,w*=t)}if(m&&(u=(r=t.getTransformedOptions(e,r,n)).left||0,d=r.top||0,r.sourceWidth?(l=r.sourceWidth,void 0!==r.right&&void 0===r.left&&(u=v-l-r.right)):l=v-u-(r.right||0),r.sourceHeight?(c=r.sourceHeight,void 0!==r.bottom&&void 0===r.top&&(d=y-c-r.bottom)):c=y-d-(r.bottom||0),b=l,w=c),a=r.maxWidth,i=r.maxHeight,o=r.minWidth,s=r.minHeight,m&&a&&i&&r.crop?(b=a,w=i,(g=l/c-a/i)<0?(c=i*l/a,void 0===r.top&&void 0===r.bottom&&(d=(y-c)/2)):g>0&&(l=a*c/i,void 0===r.left&&void 0===r.right&&(u=(v-l)/2))):((r.contain||r.cover)&&(o=a=a||o,s=i=i||s),r.cover?(x(),A()):(A(),x())),m){if((h=r.pixelRatio)>1&&(p.style.width=b+"px",p.style.height=w+"px",b*=h,w*=h,p.getContext("2d").scale(h,h)),(f=r.downsamplingRatio)>0&&f<1&&b<l&&w<c)for(;l*f>b;)p.width=l*f,p.height=c*f,t.renderImageToCanvas(p,e,u,d,l,c,0,0,p.width,p.height,r),u=0,d=0,l=p.width,c=p.height,(e=document.createElement("canvas")).width=l,e.height=c,t.renderImageToCanvas(e,p,0,0,l,c,0,0,l,c,r);return p.width=b,p.height=w,t.transformCoordinates(p,r),t.renderImageToCanvas(p,e,u,d,l,c,0,0,b,w,r)}return e.width=b,e.height=w,e}})?n.apply(e,a):n)||(t.exports=i)}()},function(t,e,r){var n,a,i;!function(o){"use strict";a=[r(0),r(1)],void 0===(i="function"==typeof(n=function(t){function e(t){t&&(Object.defineProperty(this,"map",{value:this.privateIFDs[t].map}),Object.defineProperty(this,"tags",{value:this.tags&&this.tags[t]||{}}))}e.prototype.map={Orientation:274,Thumbnail:513,Exif:34665,GPSInfo:34853,Interoperability:40965},e.prototype.privateIFDs={34665:{name:"Exif",map:{}},34853:{name:"GPSInfo",map:{}},40965:{name:"Interoperability",map:{}}},e.prototype.get=function(t){return this[t]||this[this.map[t]]};var r={1:{getValue:function(t,e){return t.getUint8(e)},size:1},2:{getValue:function(t,e){return String.fromCharCode(t.getUint8(e))},size:1,ascii:!0},3:{getValue:function(t,e,r){return t.getUint16(e,r)},size:2},4:{getValue:function(t,e,r){return t.getUint32(e,r)},size:4},5:{getValue:function(t,e,r){return t.getUint32(e,r)/t.getUint32(e+4,r)},size:8},9:{getValue:function(t,e,r){return t.getInt32(e,r)},size:4},10:{getValue:function(t,e,r){return t.getInt32(e,r)/t.getInt32(e+4,r)},size:8}};function n(t,e,n,a,i,o){var s,l,c,u,d,h,f=r[a];if(f){if(!((l=(s=f.size*i)>4?e+t.getUint32(n+8,o):n+8)+s>t.byteLength)){if(1===i)return f.getValue(t,l,o);for(c=[],u=0;u<i;u+=1)c[u]=f.getValue(t,l+u*f.size,o);if(f.ascii){for(d="",u=0;u<c.length&&"\0"!==(h=c[u]);u+=1)d+=h;return d}return c}console.log("Invalid Exif data: Invalid data offset.")}else console.log("Invalid Exif data: Invalid tag type.")}function a(t,e,r,a,i,o,s,l){var c,u,d,h,f,g;if(r+6>t.byteLength)console.log("Invalid Exif data: Invalid directory offset.");else{if(!((u=r+2+12*(c=t.getUint16(r,a)))+4>t.byteLength)){for(d=0;d<c;d+=1)h=r+2+12*d,f=t.getUint16(h,a),s&&!s[f]||l&&!0===l[f]||(g=n(t,e,h,t.getUint16(h+2,a),t.getUint32(h+4,a),a),i[f]=g,o&&(o[f]=h));return t.getUint32(u,a)}console.log("Invalid Exif data: Invalid directory size.")}}r[7]=r[1],t.parseExifData=function(t,r,n,i,o){if(!o.disableExif){var s,l,c=o.includeExifTags,u=o.excludeExifTags||{34665:{37500:!0}},d=r+10;if(1165519206===t.getUint32(r+4))if(d+8>t.byteLength)console.log("Invalid Exif data: Invalid segment size.");else if(0===t.getUint16(r+8)){switch(t.getUint16(d)){case 18761:s=!0;break;case 19789:s=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}42===t.getUint16(d+2,s)?(l=t.getUint32(d+4,s),i.exif=new e,o.disableExifOffsets||(i.exifOffsets=new e,i.exifTiffOffset=d,i.exifLittleEndian=s),(l=a(t,d,d+l,s,i.exif,i.exifOffsets,c,u))&&!o.disableExifThumbnail&&(l=a(t,d,d+l,s,i.exif,i.exifOffsets,c,u),i.exif[513]&&i.exif[514]&&(i.exif[513]=function(t,e,r){if(r&&!(e+r>t.byteLength))return new Blob([t.buffer.slice(e,e+r)],{type:"image/jpeg"});console.log("Invalid Exif data: Invalid thumbnail data.")}(t,d+i.exif[513],i.exif[514]))),Object.keys(i.exif.privateIFDs).forEach((function(r){!function(t,r,n,i,o,s,l){var c=t.exif[r];c&&(t.exif[r]=new e(r),t.exifOffsets&&(t.exifOffsets[r]=new e(r)),a(n,i,i+c,o,t.exif[r],t.exifOffsets&&t.exifOffsets[r],s&&s[r],l&&l[r]))}(i,r,t,d,s,c,u)}))):console.log("Invalid Exif data: Missing TIFF marker.")}else console.log("Invalid Exif data: Missing byte alignment offset.")}},t.metaDataParsers.jpeg[65505].push(t.parseExifData),t.exifWriters={274:function(t,e,r){return new DataView(t,e.exifOffsets[274]+8,2).setUint16(0,r,e.exifLittleEndian),t}},t.writeExifData=function(e,r,n,a){t.exifWriters[r.exif.map[n]](e,r,a)},t.ExifMap=e})?n.apply(e,a):n)||(t.exports=i)}()},function(t,e,r){var n,a,i;!function(o){"use strict";a=[r(0),r(1)],void 0===(i="function"==typeof(n=function(t){function e(){}function r(t,e,r,n,a){return"binary"===e.types[t]?new Blob([r.buffer.slice(n,n+a)]):"Uint16"===e.types[t]?r.getUint16(n):function(t,e,r){for(var n="",a=e+r,i=e;i<a;i+=1)n+=String.fromCharCode(t.getUint8(i));return n}(r,n,a)}function n(t,e){return void 0===t?e:t instanceof Array?(t.push(e),t):[t,e]}function a(t,e,a,i,o,s){for(var l,c,u,d=e+a,h=e;h<d;)28===t.getUint8(h)&&2===t.getUint8(h+1)&&(u=t.getUint8(h+2),o&&!o[u]||s&&s[u]||(c=t.getInt16(h+3),l=r(u,i.iptc,t,h+5,c),i.iptc[u]=n(i.iptc[u],l),i.iptcOffsets&&(i.iptcOffsets[u]=h))),h+=1}function i(t,e){return 943868237===t.getUint32(e)&&1028===t.getUint16(e+4)}function o(t,e){var r=t.getUint8(e+7);return r%2!=0&&(r+=1),0===r&&(r=4),r}e.prototype.map={ObjectName:5},e.prototype.types={0:"Uint16",200:"Uint16",201:"Uint16",202:"binary"},e.prototype.get=function(t){return this[t]||this[this.map[t]]},t.parseIptcData=function(t,r,n,s,l){if(!l.disableIptc)for(var c=r+n;r+8<c;){if(i(t,r)){var u=o(t,r),d=r+8+u;if(d>c){console.log("Invalid IPTC data: Invalid segment offset.");break}var h=t.getUint16(r+6+u);if(r+h>c){console.log("Invalid IPTC data: Invalid segment size.");break}return s.iptc=new e,l.disableIptcOffsets||(s.iptcOffsets=new e),void a(t,d,h,s,l.includeIptcTags,l.excludeIptcTags||{202:!0})}r+=1}},t.metaDataParsers.jpeg[65517].push(t.parseIptcData),t.IptcMap=e})?n.apply(e,a):n)||(t.exports=i)}()},function(t,e,r){r(13);const{createWorker:n,createScheduler:a,PSM:i}=r(14),o=r(38);var s=document.getElementById("canvas"),l=[30,30,200,100],c=!1;var u=document.getElementById("canvas0"),d=u.getContext("2d");["mousedown","mousemove","mouseup"].forEach(t=>{u.addEventListener(t,t=>function(t){t.target.getBoundingClientRect();const e=t.offsetX||t.layerX,r=t.offsetY||t.layerY;return"mousedown"!==t.type||c||(c=!0,l[0]=e,l[2]=e,l[1]=r,l[3]=r),"mousemove"===t.type&&c&&(l[2]=e,l[3]=r),"mouseup"===t.type&&c&&(c=!1,console.log(l)),{x:e,y:r}}(t))});var h=document.getElementById("video");h.setAttribute("playsinline",""),h.setAttribute("autoplay",""),h.setAttribute("muted",""),h.addEventListener("resize",(function(t){u.width=h.videoWidth,u.height=h.videoHeight})),h.addEventListener("play",()=>{requestAnimationFrame((function t(){d.drawImage(h,0,0,u.width,u.height),d.fillStyle="#ffffff77",d.fillRect(l[0],l[1],l[2]-l[0],l[3]-l[1]),requestAnimationFrame(t)}))});var f={audio:!1,video:{facingMode:"environment",width:{max:400}}};var g,p={};if(window.location.search&&(g=window.location.href,p=g.match(/([^?=&]+)(=([^&]*))/g).reduce((t,e)=>(t[e.slice(0,e.indexOf("="))]=e.slice(e.indexOf("=")+1),t),{})),p.roi){let t=void 0;try{t=JSON.parse(decodeURI(p.roi)),l=t}catch(t){}}var m=p.font||"digits";"7seg"===m&&(document.getElementById("dilate").value=1,document.getElementById("minconf").value=20),console.log("carregando modelos...");const v=a(),y=n({langPath:"https://ocr.ipt.br",gzip:!1});y.load().then(t=>y.loadLanguage(m)).then(t=>y.initialize(m)).then(t=>y.setParameters({tessedit_char_whitelist:"+-0.123456789eE",tessedit_pageseg_mode:i.SINGLE_LINE})).catch(t=>{console.log("Erro ao carregar modelo."),console.log(t)}).finally(t=>{console.log("tesseract ready!"),document.getElementById("loading").style.display="none",v.addWorker(y),navigator.mediaDevices.getUserMedia(f).then((function(t){h.srcObject=t;const e=t.getVideoTracks()[0],r=new ImageCapture(e),n=()=>{r.takePhoto().then(t=>URL.createObjectURL(t)).then(t=>{var e=s.getContext("2d"),r=new Image;let n=[Math.min(l[0],l[2]),Math.min(l[1],l[3]),Math.max(l[0],l[2]),Math.max(l[1],l[3])];r.onload=()=>(e.clearRect(0,0,u.width,u.height),e.drawImage(r,n[0],n[1],n[2]-n[0],n[3]-n[1],0,0,n[2]-n[0],n[3]-n[1]),o.default(e,s,r,n),v.addJob("recognize",s).then(t=>{if(!t.data.lines.length)return;let e=t.data.words.filter(t=>t.text.length>1).sort((t,e)=>e.confidence-t.confidence);if(e.length){let t=e[0].text.split(/[ \n]/).filter(t=>t.length>1)[0]||"",r=Math.round(e[0].confidence);if(r>parseFloat(document.getElementById("minconf").value)){let e=(new Date).toISOString().replace("T"," ").replace("Z","");if(document.getElementById("progress").innerText=t,document.getElementById("confidence").innerText=r+" %",document.getElementById("isoString").innerText=e,document.getElementById("confidence").classList=r<70?"has-text-danger":"has-text-success",t.length){let n=t+"\t"+r+"\t"+e.split(".")[0]+"\n";if(p.ws&&(new WebSocket("ws://127.0.0.1:"+p.ws).onopen=t=>{t.target.send(n),t.target.close()}),document.getElementById("ocrlog").checked){let t=document.getElementById("ocrlogtxt");t.value+=n,t.scrollTop=t.scrollHeight}}}}}),URL.revokeObjectURL(t),Promise.resolve(s)),r.src=t}).catch(t=>console.error("takePhoto() error:",t)).finally(()=>{window.setTimeout(n,parseFloat(document.getElementById("loginterval").value))})};n()})).catch(t=>console.error("getUserMedia() error:",t))})},function(t,e,r){},function(t,e,r){r(15);const n=r(16),a=r(7),i=r(36),o=r(8),s=r(37),{setLogging:l}=r(3);t.exports={OEM:o,PSM:s,createScheduler:n,createWorker:a,setLogging:l,...i}},function(t,e,r){var n=function(t){"use strict";var e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,i=Object.create(a.prototype),o=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return F()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var s=w(o,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=c(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,o),i}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function d(){}function h(){}function f(){}var g={};g[a]=function(){return this};var p=Object.getPrototypeOf,m=p&&p(p(E([])));m&&m!==e&&r.call(m,a)&&(g=m);var v=f.prototype=d.prototype=Object.create(g);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(a,i){function o(){return new e((function(n,o){!function n(a,i,o,s){var l=c(t[a],t,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==typeof d&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,o,s)}),(function(t){n("throw",t,o,s)})):e.resolve(d).then((function(t){u.value=t,o(u)}),(function(t){return n("throw",t,o,s)}))}s(l.arg)}(a,i,n,o)}))}return n=n?n.then(o,o):o()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=c(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var a=n.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:F}}function F(){return{value:void 0,done:!0}}return h.prototype=v.constructor=f,f.constructor=h,h.displayName=s(f,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,o,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},y(b.prototype),b.prototype[i]=function(){return this},t.AsyncIterator=b,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var o=new b(l(e,r,n,a),i);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},y(v),s(v,o,"Generator"),v[a]=function(){return this},v.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}(t.exports);try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},function(t,e,r){const n=r(6),{log:a}=r(3),i=r(2);let o=0;t.exports=()=>{const t=i("Scheduler",o),e={},r={};let s=[];o+=1;const l=()=>Object.keys(e).length,c=()=>{if(0!==s.length){const t=Object.keys(e);for(let n=0;n<t.length;n+=1)if(void 0===r[t[n]]){s[0](e[t[n]]);break}}},u=(e,i)=>new Promise((o,l)=>{const u=n({action:e,payload:i});s.push(async t=>{s.shift(),r[t.id]=u;try{o(await t[e].apply(this,[...i,u.id]))}catch(t){l(t)}finally{delete r[t.id],c()}}),a(`[${t}]: Add ${u.id} to JobQueue`),a(`[${t}]: JobQueue length=${s.length}`),c()});return{addWorker:r=>(e[r.id]=r,a(`[${t}]: Add ${r.id}`),a(`[${t}]: Number of workers=${l()}`),c(),r.id),addJob:async(e,...r)=>{if(0===l())throw Error(`[${t}]: You need to have at least one worker before adding jobs`);return u(e,r)},terminate:async()=>{Object.keys(e).forEach(async t=>{await e[t].terminate()}),s=[]},getQueueLen:()=>s.length,getNumWorkers:l}}},function(t,e,r){const n="browser"===r(18)("type")?r(5):t=>t;t.exports=t=>{const e={...t};return["corePath","workerPath","langPath"].forEach(r=>{void 0!==t[r]&&(e[r]=n(e[r]))}),e}},function(t,e,r){(function(e){const n=r(19);t.exports=t=>{const r={};return"undefined"!=typeof WorkerGlobalScope?r.type="webworker":"object"==typeof window?r.type="browser":n()?r.type="electron":"object"==typeof e&&(r.type="node"),void 0===t?r:r[t]}}).call(this,r(4))},function(t,e,r){(function(e){t.exports=function(){return"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||(!(void 0===e||"object"!=typeof e.versions||!e.versions.electron)||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}}).call(this,r(4))},function(t,e){t.exports=t=>{const e=[],r=[],n=[],a=[],i=[];return t.blocks.forEach(o=>{o.paragraphs.forEach(e=>{e.lines.forEach(r=>{r.words.forEach(n=>{n.symbols.forEach(a=>{i.push({...a,page:t,block:o,paragraph:e,line:r,word:n})}),a.push({...n,page:t,block:o,paragraph:e,line:r})}),n.push({...r,page:t,block:o,paragraph:e})}),r.push({...e,page:t,block:o})}),e.push({...o,page:t})}),{...t,blocks:e,paragraphs:r,lines:n,words:a,symbols:i}}},function(t,e,r){const n=r(8);t.exports={defaultOEM:n.DEFAULT}},function(t,e,r){const n=r(23),a=r(26),i=r(27),o=r(28),s=r(29),l=r(30);t.exports={defaultOptions:n,spawnWorker:a,terminateWorker:i,onMessage:o,send:s,loadImage:l}},function(t,e,r){(function(e){const n=r(5),{version:a,dependencies:i}=r(24),o=r(25);t.exports={...o,workerPath:void 0!==e&&"development"===e.env.TESS_ENV?n("/dist/worker.dev.js?nocache="+Math.random().toString(36).slice(3)):`https://unpkg.com/tesseract.js@v${a}/dist/worker.min.js`,corePath:`https://unpkg.com/tesseract.js-core@v${i["tesseract.js-core"].substring(1)}/tesseract-core.${"object"==typeof WebAssembly?"wasm":"asm"}.js`}}).call(this,r(4))},function(t){t.exports=JSON.parse('{"name":"tesseract.js","version":"2.1.4","description":"Pure Javascript Multilingual OCR","main":"src/index.js","types":"src/index.d.ts","unpkg":"dist/tesseract.min.js","jsdelivr":"dist/tesseract.min.js","scripts":{"start":"node scripts/server.js","build":"rimraf dist && webpack --config scripts/webpack.config.prod.js","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json","prepublishOnly":"npm run build","wait":"rimraf dist && wait-on http://localhost:3000/dist/tesseract.dev.js","test":"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html","lint":"eslint src","lint:fix":"eslint --fix src","postinstall":"opencollective-postinstall || true"},"browser":{"./src/worker/node/index.js":"./src/worker/browser/index.js"},"author":"","contributors":["jeromewu"],"license":"Apache-2.0","devDependencies":{"@babel/core":"^7.7.7","@babel/preset-env":"^7.7.7","acorn":"^6.4.0","babel-loader":"^8.1.0","cors":"^2.8.5","eslint":"^7.2.0","eslint-config-airbnb-base":"^14.2.0","eslint-plugin-import":"^2.22.1","expect.js":"^0.3.1","express":"^4.17.1","mocha":"^8.1.3","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","nyc":"^15.1.0","rimraf":"^2.7.1","wait-on":"^3.3.0","webpack":"^4.44.2","webpack-bundle-analyzer":"^3.6.0","webpack-cli":"^3.3.12","webpack-dev-middleware":"^3.7.2"},"dependencies":{"blueimp-load-image":"^3.0.0","bmp-js":"^0.1.0","file-type":"^12.4.1","idb-keyval":"^3.2.0","is-electron":"^2.2.0","is-url":"^1.2.4","jpeg-autorotate":"^7.1.1","node-fetch":"^2.6.0","opencollective-postinstall":"^2.0.2","regenerator-runtime":"^0.13.3","resolve-url":"^0.2.1","tesseract.js-core":"^2.2.0","zlibjs":"^0.3.1"},"repository":{"type":"git","url":"https://github.com/naptha/tesseract.js.git"},"bugs":{"url":"https://github.com/naptha/tesseract.js/issues"},"homepage":"https://github.com/naptha/tesseract.js","collective":{"type":"opencollective","url":"https://opencollective.com/tesseractjs"}}')},function(t,e){t.exports={langPath:"https://tessdata.projectnaptha.com/4.0.0",workerBlobURL:!0,logger:()=>{}}},function(t,e){t.exports=({workerPath:t,workerBlobURL:e})=>{let r;if(Blob&&URL&&e){const e=new Blob([`importScripts("${t}");`],{type:"application/javascript"});r=new Worker(URL.createObjectURL(e))}else r=new Worker(t);return r}},function(t,e){t.exports=t=>{t.terminate()}},function(t,e){t.exports=(t,e)=>{t.onmessage=({data:t})=>{e(t)}}},function(t,e){t.exports=async(t,e)=>{t.postMessage(e)}},function(t,e,r){const n=r(5),a=r(31),i=t=>new Promise((e,r)=>{const n=new FileReader;n.onload=()=>{e(n.result)},n.onerror=({target:{error:{code:t}}})=>{r(Error("File could not be read! Code="+t))},n.readAsArrayBuffer(t)}),o=t=>new Promise(e=>{a(t,t=>t.toBlob(e),{orientation:!0,canvas:!0})}),s=async t=>{let e=t;if(void 0===t)return"undefined";if("string"==typeof t)if(t.endsWith(".pbm")){const r=await fetch(n(t));e=await r.arrayBuffer()}else{let r=t;/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(t)||(r=n(t)),e=await i(await o(r))}else if(t instanceof HTMLElement)"IMG"===t.tagName&&(e=await s(t.src)),"VIDEO"===t.tagName&&(e=await s(t.poster)),"CANVAS"===t.tagName&&await new Promise(r=>{t.toBlob(async t=>{e=await i(t),r()})});else if(t instanceof File||t instanceof Blob){let r=t;t.name.endsWith(".pbm")||(r=await o(r)),e=await i(r)}return new Uint8Array(e)};t.exports=s},function(t,e,r){t.exports=r(0),r(9),r(1),r(32),r(10),r(33),r(11),r(34),r(35)},function(t,e,r){var n,a,i;!function(o){"use strict";a=[r(0)],void 0===(i="function"==typeof(n=function(t){"undefined"!=typeof fetch&&"undefined"!=typeof Request?t.fetchBlob=function(t,e,r){fetch(new Request(t,r)).then((function(t){return t.blob()})).then(e).catch((function(t){e(null,t)}))}:"undefined"!=typeof XMLHttpRequest&&"undefined"!=typeof ProgressEvent&&(t.fetchBlob=function(t,e,r){r=r||{};var n=new XMLHttpRequest;n.open(r.method||"GET",t),r.headers&&Object.keys(r.headers).forEach((function(t){n.setRequestHeader(t,r.headers[t])})),n.withCredentials="include"===r.credentials,n.responseType="blob",n.onload=function(){e(n.response)},n.onerror=n.onabort=n.ontimeout=function(t){e(null,t)},n.send(r.body)})})?n.apply(e,a):n)||(t.exports=i)}()},function(t,e,r){var n,a,i;!function(o){"use strict";a=[r(0),r(10)],void 0===(i="function"==typeof(n=function(t){var e=t.ExifMap.prototype;e.tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",34665:{36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber"},34853:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},40965:{1:"InteroperabilityIndex"}},e.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},e.getText=function(t){var e=this.get(t);switch(t){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[t][e];case"ExifVersion":case"FlashpixVersion":if(!e)return;return String.fromCharCode(e[0],e[1],e[2],e[3]);case"ComponentsConfiguration":if(!e)return;return this.stringValues[t][e[0]]+this.stringValues[t][e[1]]+this.stringValues[t][e[2]]+this.stringValues[t][e[3]];case"GPSVersionID":if(!e)return;return e[0]+"."+e[1]+"."+e[2]+"."+e[3]}return String(e)},e.getAll=function(){var t,e,r,n={};for(t in this)Object.prototype.hasOwnProperty.call(this,t)&&((e=this[t])&&e.getAll?n[this.privateIFDs[t].name]=e.getAll():(r=this.tags[t])&&(n[r]=this.getText(r)));return n},e.getName=function(t){var e=this.tags[t];return"object"==typeof e?this.privateIFDs[t].name:e},function(){var t,r,n,a=e.tags;for(t in a)if(Object.prototype.hasOwnProperty.call(a,t))if(r=e.privateIFDs[t])for(t in n=a[t])Object.prototype.hasOwnProperty.call(n,t)&&(r.map[n[t]]=Number(t));else e.map[a[t]]=Number(t)}()})?n.apply(e,a):n)||(t.exports=i)}()},function(t,e,r){var n,a,i;!function(o){"use strict";a=[r(0),r(11)],void 0===(i="function"==typeof(n=function(t){var e=t.IptcMap.prototype;e.tags={0:"ApplicationRecordVersion",3:"ObjectTypeReference",4:"ObjectAttributeReference",5:"ObjectName",7:"EditStatus",8:"EditorialUpdate",10:"Urgency",12:"SubjectReference",15:"Category",20:"SupplementalCategories",22:"FixtureIdentifier",25:"Keywords",26:"ContentLocationCode",27:"ContentLocationName",30:"ReleaseDate",35:"ReleaseTime",37:"ExpirationDate",38:"ExpirationTime",40:"SpecialInstructions",42:"ActionAdvised",45:"ReferenceService",47:"ReferenceDate",50:"ReferenceNumber",55:"DateCreated",60:"TimeCreated",62:"DigitalCreationDate",63:"DigitalCreationTime",65:"OriginatingProgram",70:"ProgramVersion",75:"ObjectCycle",80:"Byline",85:"BylineTitle",90:"City",92:"Sublocation",95:"State",100:"CountryCode",101:"Country",103:"OriginalTransmissionReference",105:"Headline",110:"Credit",115:"Source",116:"CopyrightNotice",118:"Contact",120:"Caption",121:"LocalCaption",122:"Writer",125:"RasterizedCaption",130:"ImageType",131:"ImageOrientation",135:"LanguageIdentifier",150:"AudioType",151:"AudioSamplingRate",152:"AudioSamplingResolution",153:"AudioDuration",154:"AudioOutcue",184:"JobID",185:"MasterDocumentID",186:"ShortDocumentID",187:"UniqueDocumentID",188:"OwnerID",200:"ObjectPreviewFileFormat",201:"ObjectPreviewFileVersion",202:"ObjectPreviewData",221:"Prefs",225:"ClassifyState",228:"SimilarityIndex",230:"DocumentNotes",231:"DocumentHistory",232:"ExifCameraInfo",255:"CatalogSets"},e.stringValues={10:{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"},75:{a:"Morning",b:"Both Morning and Evening",p:"Evening"},131:{L:"Landscape",P:"Portrait",S:"Square"}},e.getText=function(t){var e=this.get(t),r=this.map[t],n=this.stringValues[r];return n?n[e]:String(e)},e.getAll=function(){var t,e,r={};for(t in this)Object.prototype.hasOwnProperty.call(this,t)&&(e=this.tags[t])&&(r[e]=this.getText(e));return r},e.getName=function(t){return this.tags[t]},function(){var t,r=e.tags,n=e.map||{};for(t in r)Object.prototype.hasOwnProperty.call(r,t)&&(n[r[t]]=Number(t))}()})?n.apply(e,a):n)||(t.exports=i)}()},function(t,e,r){var n,a,i;!function(o){"use strict";a=[r(0),r(9),r(1)],void 0===(i="function"==typeof(n=function(t){var e=t.hasCanvasOption,r=t.hasMetaOption,n=t.transformCoordinates,a=t.getTransformedOptions;i=document.createElement("img"),i.onload=function(){t.orientation=1===i.width&&2===i.height},i.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==",t.hasCanvasOption=function(r){return!0==!!r.orientation&&!t.orientation||r.orientation>1&&r.orientation<9||e.call(t,r)},t.hasMetaOption=function(e){return e&&!0===e.orientation&&!t.orientation||r.call(t,e)},t.transformCoordinates=function(e,r){n.call(t,e,r);var a=e.getContext("2d"),i=e.width,o=e.height,s=e.style.width,l=e.style.height,c=r.orientation;if(c>1&&c<9)switch(c>4&&(e.width=o,e.height=i,e.style.width=l,e.style.height=s),c){case 2:a.translate(i,0),a.scale(-1,1);break;case 3:a.translate(i,o),a.rotate(Math.PI);break;case 4:a.translate(0,o),a.scale(1,-1);break;case 5:a.rotate(.5*Math.PI),a.scale(1,-1);break;case 6:a.rotate(.5*Math.PI),a.translate(0,-o);break;case 7:a.rotate(.5*Math.PI),a.translate(i,-o),a.scale(-1,1);break;case 8:a.rotate(-.5*Math.PI),a.translate(-i,0)}},t.getTransformedOptions=function(e,r,n){var i,o,s=a.call(t,e,r),l=s.orientation;if(!0===l){if(t.orientation)return s;l=n&&n.exif&&n.exif.get("Orientation")}if(!(l>1&&l<9))return s;for(o in i={},s)Object.prototype.hasOwnProperty.call(s,o)&&(i[o]=s[o]);switch(i.orientation=l,l){case 2:i.left=s.right,i.right=s.left;break;case 3:i.left=s.right,i.top=s.bottom,i.right=s.left,i.bottom=s.top;break;case 4:i.top=s.bottom,i.bottom=s.top;break;case 5:i.left=s.top,i.top=s.left,i.right=s.bottom,i.bottom=s.right;break;case 6:i.left=s.top,i.top=s.right,i.right=s.bottom,i.bottom=s.left;break;case 7:i.left=s.bottom,i.top=s.right,i.right=s.top,i.bottom=s.left;break;case 8:i.left=s.bottom,i.top=s.left,i.right=s.top,i.bottom=s.right}return i.orientation>4&&(i.maxWidth=s.maxHeight,i.maxHeight=s.maxWidth,i.minWidth=s.minHeight,i.minHeight=s.minWidth,i.sourceWidth=s.sourceHeight,i.sourceHeight=s.sourceWidth),i};var i})?n.apply(e,a):n)||(t.exports=i)}()},function(t,e,r){const n=r(7);t.exports={recognize:async(t,e,r)=>{const a=n(r);return await a.load(),await a.loadLanguage(e),await a.initialize(e),a.recognize(t).finally(async()=>{await a.terminate()})},detect:async(t,e)=>{const r=n(e);return await r.load(),await r.loadLanguage("osd"),await r.initialize("osd"),r.detect(t).finally(async()=>{await r.terminate()})}}},function(t,e){t.exports={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12"}},function(t,e,r){"use strict";r.r(e);const{Filters:n}=r(39);e.default=function(t,e,r,a){var i=r.width,o=r.height;!function(t,e,r){for(var n=t.getImageData(0,0,e,r),a=n.data,i=0;i<a.length;i+=4){var o=.2126*a[i]+.7152*a[i+1]+.0722*a[i+2];a[i]=o,a[i+1]=o,a[i+2]=o}t.putImageData(n,0,0)}(t,i,o);var s=1/(parseFloat(document.getElementById("gamma").value)/10),l=t.getImageData(0,0,e.width,e.height);function c(t,r){var n=4*parseInt(t+e.width*r);return{r:l.data[n+0],g:l.data[n+1],b:l.data[n+2]}}for(let t=0;t<e.height;t++)for(let r=0;r<e.width;r++){var u=c(r,t),d=(u={r:255*Math.pow(u.r/255,s),g:255*Math.pow(u.g/255,s),b:255*Math.pow(u.b/255,s)},4*parseInt(r+e.width*t)),h=l.data;h[d+0]=u.r,h[d+1]=u.g,h[d+2]=u.b}t.putImageData(l,0,0),function(t,e,r,n){for(var a,i=e.getImageData(0,0,r,n),o=i.data,s=0;s<o.length;s+=4){var l=.2126*o[s]+.7152*o[s+1]+.0722*o[s+2];a=document.getElementById("inverter").checked?l>t?0:255:l>t?255:0,o[s]=a,o[s+1]=a,o[s+2]=a}e.putImageData(i,0,0)}(function(t,e){for(var r=0,n=1;n<256;++n)r+=n*t[n];var a,i,o=0,s=0,l=0,c=0,u=0,d=0,h=0;for(n=0;n<256;++n)if(0!=(s+=t[n])){if(0==(l=e-s))break;a=(o+=n*t[n])/s,i=(r-o)/l,(u=s*l*Math.pow(a-i,2))>=c&&(d=n,u>c&&(h=n),c=u)}return(d+h)/2}(function(t,e,r){for(var n,a=t.getImageData(0,0,e,r).data,i=Array.apply(null,new Array(256)).map(Number.prototype.valueOf,0),o=0;o<a.length;o+=4)n=.2126*a[o]+.7152*a[o+1]+.0722*a[o+2],i[Math.floor(n)]+=1;return i}(t,i,o),i*o),t,i,o);let f=~~document.getElementById("dilate").value;f&&(l=t.getImageData(0,0,e.width,e.height),l=n.invert(l),1===f&&(l=n.convolve(l,[1,1,1,1,1,1,1,1,1]),l=n.invert(l),t.putImageData(l,0,0,0,0,a[2]-a[0]-1,a[3]-a[1]-1)),2===f&&(l=n.convolve(l,[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),l=n.invert(l),t.putImageData(l,0,0,0,0,a[2]-a[0]-1,a[3]-a[1]-1)))}},function(t,e,r){Filters={},"undefined"==typeof Float32Array?Filters.getFloat32Array=Filters.getUint8Array=function(t){return t.length?t.slice(0):new Array(t)}:(Filters.getFloat32Array=function(t){return new Float32Array(t)},Filters.getUint8Array=function(t){return new Uint8Array(t)}),"undefined"!=typeof document?(Filters.tmpCanvas=document.createElement("canvas"),Filters.tmpCtx=Filters.tmpCanvas.getContext("2d"),Filters.getPixels=function(t){var e,r;if(t.getContext){e=t;try{r=e.getContext("2d")}catch(t){}}return r||(r=(e=this.getCanvas(t.width,t.height)).getContext("2d")).drawImage(t,0,0),r.getImageData(0,0,e.width,e.height)},Filters.createImageData=function(t,e){return this.tmpCtx.createImageData(t,e)},Filters.getCanvas=function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,r},Filters.filterImage=function(t,e,r){for(var n=[this.getPixels(e)],a=2;a<arguments.length;a++)n.push(arguments[a]);return t.apply(this,n)},Filters.toCanvas=function(t){var e=this.getCanvas(t.width,t.height);return e.getContext("2d").putImageData(t,0,0),e},Filters.toImageData=function(t){return this.identity(t)}):(onmessage=function(t){var e=t.data;e.length||(e=[e]),postMessage(Filters.runPipeline(e))},Filters.createImageData=function(t,e){return{width:t,height:e,data:this.getFloat32Array(t*e*4)}}),Filters.runPipeline=function(t){var e=null;e=this[t[0].name].apply(this,t[0].args);for(var r=1;r<t.length;r++){var n=t[r],a=n.args.slice(0);a.unshift(e),e=this[n.name].apply(this,a)}return e},Filters.createImageDataFloat32=function(t,e){return{width:t,height:e,data:this.getFloat32Array(t*e*4)}},Filters.identity=function(t,e){for(var r=Filters.createImageData(t.width,t.height),n=r.data,a=t.data,i=0;i<a.length;i++)n[i]=a[i];return r},Filters.horizontalFlip=function(t){for(var e=Filters.createImageData(t.width,t.height),r=t.width,n=t.height,a=e.data,i=t.data,o=0;o<n;o++)for(var s=0;s<r;s++){var l=4*(o*r+s),c=4*(o*r+(r-s-1));a[c]=i[l],a[c+1]=i[l+1],a[c+2]=i[l+2],a[c+3]=i[l+3]}return e},Filters.verticalFlip=function(t){for(var e=Filters.createImageData(t.width,t.height),r=t.width,n=t.height,a=e.data,i=t.data,o=0;o<n;o++)for(var s=0;s<r;s++){var l=4*(o*r+s),c=4*((n-o-1)*r+s);a[c]=i[l],a[c+1]=i[l+1],a[c+2]=i[l+2],a[c+3]=i[l+3]}return e},Filters.luminance=function(t,e){for(var r=Filters.createImageData(t.width,t.height),n=r.data,a=t.data,i=0;i<a.length;i+=4){var o=.2126*a[i]+.7152*a[i+1]+.0722*a[i+2];n[i]=n[i+1]=n[i+2]=o,n[i+3]=a[i+3]}return r},Filters.grayscale=function(t,e){for(var r=Filters.createImageData(t.width,t.height),n=r.data,a=t.data,i=0;i<a.length;i+=4){var o=.3*a[i]+.59*a[i+1]+.11*a[i+2];n[i]=n[i+1]=n[i+2]=o,n[i+3]=a[i+3]}return r},Filters.grayscaleAvg=function(t,e){for(var r=Filters.createImageData(t.width,t.height),n=r.data,a=t.data,i=0;i<a.length;i+=4){var o=(a[i]+a[i+1]+a[i+2])*(1/3);n[i]=n[i+1]=n[i+2]=o,n[i+3]=a[i+3]}return r},Filters.threshold=function(t,e,r,n){var a=Filters.createImageData(t.width,t.height);null==r&&(r=255),null==n&&(n=0);for(var i=t.data,o=a.data,s=0;s<i.length;s+=4){var l=.3*i[s]+.59*i[s+1]+.11*i[s+2]>=e?r:n;o[s]=o[s+1]=o[s+2]=l,o[s+3]=i[s+3]}return a},Filters.invert=function(t){for(var e=Filters.createImageData(t.width,t.height),r=t.data,n=e.data,a=0;a<r.length;a+=4)n[a]=255-r[a],n[a+1]=255-r[a+1],n[a+2]=255-r[a+2],n[a+3]=r[a+3];return e},Filters.brightnessContrast=function(t,e,r){var n=this.brightnessContrastLUT(e,r);return this.applyLUT(t,{r:n,g:n,b:n,a:this.identityLUT()})},Filters.applyLUT=function(t,e){for(var r=Filters.createImageData(t.width,t.height),n=t.data,a=r.data,i=e.r,o=e.g,s=e.b,l=e.a,c=0;c<n.length;c+=4)a[c]=i[n[c]],a[c+1]=o[n[c+1]],a[c+2]=s[n[c+2]],a[c+3]=l[n[c+3]];return r},Filters.createLUTFromCurve=function(t){for(var e=this.getUint8Array(256),r=[0,0],n=0,a=0;n<e.length;n++){for(;a<t.length&&t[a][0]<n;)r=t[a],a++;e[n]=r[1]}return e},Filters.identityLUT=function(){for(var t=this.getUint8Array(256),e=0;e<t.length;e++)t[e]=e;return t},Filters.invertLUT=function(){for(var t=this.getUint8Array(256),e=0;e<t.length;e++)t[e]=255-e;return t},Filters.brightnessContrastLUT=function(t,e){for(var r=this.getUint8Array(256),n=-128*e+128+255*t,a=0;a<r.length;a++){var i=a*e+n;r[a]=i<0?0:i>255?255:i}return r},Filters.convolve=function(t,e,r){for(var n=Math.round(Math.sqrt(e.length)),a=Math.floor(n/2),i=t.data,o=t.width,s=t.height,l=o,c=s,u=Filters.createImageData(l,c),d=u.data,h=r?1:0,f=0;f<c;f++)for(var g=0;g<l;g++){for(var p=f,m=g,v=4*(f*l+g),y=0,b=0,w=0,A=0,x=0;x<n;x++)for(var S=0;S<n;S++){var E=4*(Math.min(s-1,Math.max(0,p+x-a))*o+Math.min(o-1,Math.max(0,m+S-a))),F=e[x*n+S];y+=i[E]*F,b+=i[E+1]*F,w+=i[E+2]*F,A+=i[E+3]*F}d[v]=y,d[v+1]=b,d[v+2]=w,d[v+3]=A+h*(255-A)}return u},Filters.verticalConvolve=function(t,e,r){for(var n=e.length,a=Math.floor(n/2),i=t.data,o=t.width,s=t.height,l=o,c=s,u=Filters.createImageData(l,c),d=u.data,h=r?1:0,f=0;f<c;f++)for(var g=0;g<l;g++){for(var p=f,m=g,v=4*(f*l+g),y=0,b=0,w=0,A=0,x=0;x<n;x++){var S=4*(Math.min(s-1,Math.max(0,p+x-a))*o+m),E=e[x];y+=i[S]*E,b+=i[S+1]*E,w+=i[S+2]*E,A+=i[S+3]*E}d[v]=y,d[v+1]=b,d[v+2]=w,d[v+3]=A+h*(255-A)}return u},Filters.horizontalConvolve=function(t,e,r){for(var n=e.length,a=Math.floor(n/2),i=t.data,o=t.width,s=o,l=t.height,c=Filters.createImageData(s,l),u=c.data,d=r?1:0,h=0;h<l;h++)for(var f=0;f<s;f++){for(var g=h,p=f,m=4*(h*s+f),v=0,y=0,b=0,w=0,A=0;A<n;A++){var x=4*(g*o+Math.min(o-1,Math.max(0,p+A-a))),S=e[A];v+=i[x]*S,y+=i[x+1]*S,b+=i[x+2]*S,w+=i[x+3]*S}u[m]=v,u[m+1]=y,u[m+2]=b,u[m+3]=w+d*(255-w)}return c},Filters.separableConvolve=function(t,e,r,n){return this.horizontalConvolve(this.verticalConvolveFloat32(t,r,n),e,n)},Filters.convolveFloat32=function(t,e,r){for(var n=Math.round(Math.sqrt(e.length)),a=Math.floor(n/2),i=t.data,o=t.width,s=t.height,l=o,c=s,u=Filters.createImageDataFloat32(l,c),d=u.data,h=r?1:0,f=0;f<c;f++)for(var g=0;g<l;g++){for(var p=f,m=g,v=4*(f*l+g),y=0,b=0,w=0,A=0,x=0;x<n;x++)for(var S=0;S<n;S++){var E=4*(Math.min(s-1,Math.max(0,p+x-a))*o+Math.min(o-1,Math.max(0,m+S-a))),F=e[x*n+S];y+=i[E]*F,b+=i[E+1]*F,w+=i[E+2]*F,A+=i[E+3]*F}d[v]=y,d[v+1]=b,d[v+2]=w,d[v+3]=A+h*(255-A)}return u},Filters.verticalConvolveFloat32=function(t,e,r){for(var n=e.length,a=Math.floor(n/2),i=t.data,o=t.width,s=t.height,l=o,c=s,u=Filters.createImageDataFloat32(l,c),d=u.data,h=r?1:0,f=0;f<c;f++)for(var g=0;g<l;g++){for(var p=f,m=g,v=4*(f*l+g),y=0,b=0,w=0,A=0,x=0;x<n;x++){var S=4*(Math.min(s-1,Math.max(0,p+x-a))*o+m),E=e[x];y+=i[S]*E,b+=i[S+1]*E,w+=i[S+2]*E,A+=i[S+3]*E}d[v]=y,d[v+1]=b,d[v+2]=w,d[v+3]=A+h*(255-A)}return u},Filters.horizontalConvolveFloat32=function(t,e,r){for(var n=e.length,a=Math.floor(n/2),i=t.data,o=t.width,s=o,l=t.height,c=Filters.createImageDataFloat32(s,l),u=c.data,d=r?1:0,h=0;h<l;h++)for(var f=0;f<s;f++){for(var g=h,p=f,m=4*(h*s+f),v=0,y=0,b=0,w=0,A=0;A<n;A++){var x=4*(g*o+Math.min(o-1,Math.max(0,p+A-a))),S=e[A];v+=i[x]*S,y+=i[x+1]*S,b+=i[x+2]*S,w+=i[x+3]*S}u[m]=v,u[m+1]=y,u[m+2]=b,u[m+3]=w+d*(255-w)}return c},Filters.separableConvolveFloat32=function(t,e,r,n){return this.horizontalConvolveFloat32(this.verticalConvolveFloat32(t,r,n),e,n)},Filters.gaussianBlur=function(t,e){if((e=Math.abs(e))<=1)return Filters.identity(t);for(var r=e/2,n=Math.ceil(e)+(1-Math.ceil(e)%2),a=this.getFloat32Array(n),i=(r+.5)/3,o=i*i,s=1/Math.sqrt(2*Math.PI*o),l=-1/(2*i*i),c=0,u=Math.floor(n/2),d=0;d<n;d++){var h=d-u,f=s*Math.exp(h*h*l);a[d]=f,c+=f}for(d=0;d<a.length;d++)a[d]/=c;return Filters.separableConvolve(t,a,a,!1)},Filters.laplaceKernel=Filters.getFloat32Array([-1,-1,-1,-1,8,-1,-1,-1,-1]),Filters.laplace=function(t){return Filters.convolve(t,this.laplaceKernel,!0)},Filters.sobelSignVector=Filters.getFloat32Array([-1,0,1]),Filters.sobelScaleVector=Filters.getFloat32Array([1,2,1]),Filters.sobelVerticalGradient=function(t){return this.separableConvolveFloat32(t,this.sobelSignVector,this.sobelScaleVector)},Filters.sobelHorizontalGradient=function(t){return this.separableConvolveFloat32(t,this.sobelScaleVector,this.sobelSignVector)},Filters.sobelVectors=function(t){for(var e=this.sobelVerticalGradient(t),r=this.sobelHorizontalGradient(t),n={width:e.width,height:e.height,data:this.getFloat32Array(e.width*e.height*8)},a=e.data,i=r.data,o=n.data,s=0,l=0;s<o.length;s+=2,l++)o[s]=i[l],o[s+1]=a[l];return n},Filters.sobel=function(t){t=this.grayscale(t);for(var e=this.sobelVerticalGradient(t),r=this.sobelHorizontalGradient(t),n=this.createImageData(e.width,e.height),a=0;a<n.data.length;a+=4){var i=Math.abs(e.data[a]);n.data[a]=i;var o=Math.abs(r.data[a]);n.data[a+1]=o,n.data[a+2]=(i+o)/4,n.data[a+3]=255}return n},Filters.bilinearSample=function(t,e,r,n){var a=Math.floor(e),i=Math.ceil(e),o=Math.floor(r),s=Math.ceil(r),l=4*(a+t.width*o),c=4*(i+t.width*o),u=4*(a+t.width*s),d=4*(i+t.width*s),h=e-a+(r-o),f=i-e+(r-o),g=e-a+(s-r),p=i-e+(s-r),m=1/(p+g+f+h);p*=m,g*=m,f*=m,h*=m;var v=t.data;return n[0]=v[l]*p+v[c]*g+v[u]*f+v[d]*h,n[1]=v[l+1]*p+v[c+1]*g+v[u+1]*f+v[d+1]*h,n[2]=v[l+2]*p+v[c+2]*g+v[u+2]*f+v[d+2]*h,n[3]=v[l+3]*p+v[c+3]*g+v[u+3]*f+v[d+3]*h,n},Filters.distortSine=function(t,e,r){null==e&&(e=.5),null==r&&(r=e);for(var n=this.createImageData(t.width,t.height),a=n.data,i=(t.data,this.createImageData(1,1).data),o=0;o<n.height;o++){var s=o+-Math.sin(o/(n.height-1)*Math.PI*2)*r*n.height/4;s=Math.max(Math.min(s,n.height-1),0);for(var l=0;l<n.width;l++){var c=l+-Math.sin(l/(n.width-1)*Math.PI*2)*e*n.width/4;c=Math.max(Math.min(c,n.width-1),0);var u=this.bilinearSample(t,c,s,i),d=4*(o*n.width+l);a[d]=u[0],a[d+1]=u[1],a[d+2]=u[2],a[d+3]=u[3]}}return n},Filters.darkenBlend=function(t,e){for(var r=Filters.createImageData(t.width,t.height),n=t.data,a=e.data,i=r.data,o=0;o<n.length;o+=4)i[o]=n[o]<a[o]?n[o]:a[o],i[o+1]=n[o+1]<a[o+1]?n[o+1]:a[o+1],i[o+2]=n[o+2]<a[o+2]?n[o+2]:a[o+2],i[o+3]=n[o+3]+(255-n[o+3])*a[o+3]*(1/255);return r},Filters.lightenBlend=function(t,e){for(var r=Filters.createImageData(t.width,t.height),n=t.data,a=e.data,i=r.data,o=0;o<n.length;o+=4)i[o]=n[o]>a[o]?n[o]:a[o],i[o+1]=n[o+1]>a[o+1]?n[o+1]:a[o+1],i[o+2]=n[o+2]>a[o+2]?n[o+2]:a[o+2],i[o+3]=n[o+3]+(255-n[o+3])*a[o+3]*(1/255);return r},Filters.multiplyBlend=function(t,e){for(var r=Filters.createImageData(t.width,t.height),n=t.data,a=e.data,i=r.data,o=1/255,s=0;s<n.length;s+=4)i[s]=n[s]*a[s]*o,i[s+1]=n[s+1]*a[s+1]*o,i[s+2]=n[s+2]*a[s+2]*o,i[s+3]=n[s+3]+(255-n[s+3])*a[s+3]*o;return r},Filters.screenBlend=function(t,e){for(var r=Filters.createImageData(t.width,t.height),n=t.data,a=e.data,i=r.data,o=1/255,s=0;s<n.length;s+=4)i[s]=n[s]+a[s]-n[s]*a[s]*o,i[s+1]=n[s+1]+a[s+1]-n[s+1]*a[s+1]*o,i[s+2]=n[s+2]+a[s+2]-n[s+2]*a[s+2]*o,i[s+3]=n[s+3]+(255-n[s+3])*a[s+3]*o;return r},Filters.addBlend=function(t,e){for(var r=Filters.createImageData(t.width,t.height),n=t.data,a=e.data,i=r.data,o=0;o<n.length;o+=4)i[o]=n[o]+a[o],i[o+1]=n[o+1]+a[o+1],i[o+2]=n[o+2]+a[o+2],i[o+3]=n[o+3]+(255-n[o+3])*a[o+3]*(1/255);return r},Filters.subBlend=function(t,e){for(var r=Filters.createImageData(t.width,t.height),n=t.data,a=e.data,i=r.data,o=0;o<n.length;o+=4)i[o]=n[o]+a[o]-255,i[o+1]=n[o+1]+a[o+1]-255,i[o+2]=n[o+2]+a[o+2]-255,i[o+3]=n[o+3]+(255-n[o+3])*a[o+3]*(1/255);return r},Filters.differenceBlend=function(t,e){for(var r=Filters.createImageData(t.width,t.height),n=t.data,a=e.data,i=r.data,o=0;o<n.length;o+=4)i[o]=Math.abs(n[o]-a[o]),i[o+1]=Math.abs(n[o+1]-a[o+1]),i[o+2]=Math.abs(n[o+2]-a[o+2]),i[o+3]=n[o+3]+(255-n[o+3])*a[o+3]*(1/255);return r},Filters.erode=function(t){for(var e=t.data,r=t.width,n=r,a=t.height,i=Filters.createImageData(n,a),o=i.data,s=0;s<a;s++)for(var l=0;l<n;l++){var c=s,u=l,d=4*(s*n+l),h=0;0==e[4*(c*r+u)]?0==e[4*(c*r+Math.max(0,u-1))]&&0==e[4*(Math.max(0,c-1)*r+u)]&&(h=255):h=255,o[d]=h,o[d+1]=h,o[d+2]=h,o[d+3]=255}return i},e.Filters=Filters}]);